using System.Collections;
using UnityEngine;

public class InvulnerabilityFrames : MonoBehaviour
{
    PlayerHealth _health;

    [Header ("Behavior Settings")]
    [SerializeField] int _numOfFlash;
    [SerializeField] float _duration;

    public void Start()
    {
        _health = GetComponent<PlayerHealth>();
    }

    public void Flash()
    {
        StartCoroutine(FlashCoroutine ());
    }

    // IFrame flashing
    IEnumerator FlashCoroutine()
    {
        int flashCounter = 0;
        _health.isInvulnerable = true;
        SpriteFlash spriteFlash = GetComponent<SpriteFlash>();

        while (flashCounter < _numOfFlash) {
            yield return new WaitForSeconds (_duration / _numOfFlash);
            spriteFlash.PlayDamagedFlashEffect();
            flashCounter++;
        }

        _health.isInvulnerable = false;
    }

}